group: bluezone
dist: trusty
sudo: false
language: node_js
node_js:
- 6.9.0
addons:
  sonarqube: true
install:
- npm i -g npm@3
- npm install
script:
- npm test
- sonar-scanner -D sonar.host.url=$SONAR_HOST_URL -D sonar.github.endpoint=$GH_API_URL
  -D sonar.github.oauth=$SONAR_GITHUB_TOKEN
after_success:
- npm run build
- npm run semantic-release
cache:
  directories:
  - node_modules
  - "$HOME/.sonar/cache"
branches:
  only:
  - master
env:
  global:
  - SONAR_HOST_URL=http://ux-dev-sonar.rtp.raleigh.ibm.com:9000/
  - GH_API_URL=https://github.ibm.com/api/v3
  - secure: eCWy+Degzk3clflen/0I0OQeDME0RLhDHBS+IRFHeos1Cf066PKL80Va7z9BDRNC+BfVnHswpw5zvBtEu5aG7sRLETz4tVoGDIycVjD3PYzEy0/PQWDAmAKnOMJnRWsLCbIADWt1swBi+7Xf34y1ZF+nNqkqAbX1Jubs/OJ/1rBtJThyGxC1+PmFyMU5etABELNRSVZhQEXPqcuzKonQ5qcCBIvNNWj3q4rI5RpTkIwvXIdI3oMPsbuG1m0WSXNjdtMGKRiad5Pj8u+FKLKoZUUhA316SC54ev+CTO8c2XEK22vfqEQbTP1F8if9JCrf0VzeYEX3BZRZLPj25pWrOfw2rqUaN7l+o4VALJvKLgx+xzEiX9Q8E92/Ex85HciQz0wQksqkRDwGrLvKmf/elfn81/buxgCMvTuKFvuSm5wz93pQzL1QWOS1gRJKXm3BlKMiGRpliHXE8+SifDvadDmKtgS/FwU1OlNQ8m3fTz5PMVIf4MTZQbDtUNIanu4LZLtZCXKWAEcNTbrRwK2Rz3giTMWBhIDXrk2SwIrgHsgXv5mqYbObH2cRCKII00XqNC6kM842p/YbxYIxZ2J1+S7EiHm+wfordJjmEzBpv1Q9zatPwh3fBaAoUFvJmfZoorPAtwmDJoBW7TexEyDNXn+7kSnr9Mtq+JnY2bKgAX4=
  - secure: BVLHk0mizBq+OxW8D1AdJCf+YVZq6UIvYdzrredDEjeTCEaz6ZBpb++uwWkFUeHq73gCsnEtUMPxQh7o9IlwuM+3Uu8ZeZvtRa4x7CEqRsRAFN1XHQHIYHgkHV7eSmArXxqRG+fGfyOUBoo+u3iocGVxRtcVFtWzdkMvTbpvId2pK+LD2Byle6u8UJDG0HI03zwO5JW2ZBLoimGs+WbDBGVNnLUo8qF1U0knChVVP77dbXr14PkgDfQxC/LGQi/RumDO0XE89l4K+e/4TD91KwLJilim8UFmjWjJJSi2WxIrC3PlBDjlz84DycNDF6aBHwrQ22lGP8iBleN1BIX4g7IYeRbbGFZSYpkPh5oChpMifC7umOfsl4liSEgyY7XhbJkXL8unavbNrVBNmE4F33eHnPPl/Ep1R7mwtoXRY1Yg45Hz1eloUQuDsraB3jgjwLWw3tjIPkz4btwRoS2AaCK4gMttGlPuRlGElHQh+lV/gBCqfRAL6/DnPlophdqiPwcpwZuKaTmF7Ac7Zzh20gSnORc67/jVU6muYm2GdfWcySaVqGzbAHPnE+Pt165OGDN9K5i8oqp6KmJKiRwBziPWP4lhqsphG5Nr/iwYVbz8jglcjNTLJM1jKaWgopESfl/RxWELz4haJzPekdYfDYRKtPO5FsihMwJpQ5kVFNY=
  - secure: q4F07AiQA0cVnZ9XhZjvENVGydfzUEZ+zCM3LuPGIdWB33AXHBKWmeW7OHKeXJhZWaQsn4rFGVuZatbUH0c2SKei8bk6qiut0VwEBUrbiQpMePDmIsOtXWidZ/jHdqufpHdkZotyF/hDYgAHbH70cZpndX3A8g/agy0rG4jc5Mj4LUvield7KGVm2OIMTTulRLY+JHp/3hNIhc09ZZEfK+Ct6/9P7wz9rnlC6BUEu0TNT3wgXIhRbqFjzB8cnfYz8faW0A4t+ZHoHJkCtl/PyzJUpfU0Ni0kwVhVXddaPSYi+PvHI1NP1sfxpBXuVh4q6KVPJuChWT+CEW1u4AQZYUm5h1R1gQvN7kYBsTyqqja4Z/AL9Xb9lDHOzXLCtCB2OC/dXeaO0HM64neQJxBD1NfNCLm/2B1TmVnqX6SeaAziTpVxDs37Xx3P3anLT9IxrFyHTDA1BULyGGTswWcZX5rJMNt3LDNpiC7BCuEQm2P4+cwmDrt5jpXIxZAxTpUz9TKaTpb10r3wp61rdb4j/hEBy+Keq/xKu7Ybyo9wVZgjEOswDm6nQOKVOzwTNtPqUMaCc4ZiiD2eQxi/RjNqZI0+f/hJLVvcXx51WtoBMOUw4Pjos2NE7zcEcZ5BDg4r2k4YDuHMAceuyLHgPac9OYw1Naa4PAUFMcyUjFzRg4s=
  - secure: LlEzhroRtXOmGZpPXa1veP5tSZq3mIWxouOvRoUkBoDYrcTUSfS2f5vks9lbxEYPHHZjZhGGzxQ9EVIqIdvOWSJks6vjN6aesjt/B5RaC8tYiQhPNpa3hvazHayqjecFjcLp3QtSB2lU//sveDv48dDSqpFShFYBJmhTtaYlSgOAnklF5HRWjs8mOt7LS0jrA9q+m3DYActJVKh/GCItDCRa90uaofFAfwS8axNlh1wsTp03Rx6j/MuOj86669YbNEeFdlY/w5YkbVe1nFz5VdlXH/3dWnRrnHCRyi+89PiZ70Po/Xr/kfB0LVo23/dyRynhP4yinSxYg1Ga/7dNZfoOXWnmqXOrLPTuV38+naYpPRrO7KWNgjcFsXnTK7XPYaOG+OdsD7nOb+HJk0IV4bpRbGZQeV5FEkcvXPnT9Ck0xjrish5MpIsWPHzK/j59egS3Kt4FlNcHYOS2wGJQ2sYcgfvS9/Lffzgsksxx10C/+WAnpqCKzZjlRTiBtkuW3Zp46Dv6a8pQS6PJU35QGRA9axlaydcdDtx9CmLVahgCjLGjO83gH61BGVEk11keavuE+QJ8Hu7NP4w+MJTEvmJMtxDWq8yWBX1wugNpogttY2mu0ozMy3rH0sTXWvT8247xCOS+Bq52PuF0npVGLNtNX+WkVJ/CtnIYh27v2qU=
  - secure: RwlNtFT4Ck/e6ihUyNEoOFfdyr6+TMvil67OTI+0MYNE78EIwxdMhvwd4ttdWNZffSkcFqMsWPiZJSzpluGfgPUuku8kReM4P+TMYLP/1XuhtJnt42kGU4lA0CJumGnnU9bfdYd56CcUYR4PMBAitVx5XY6DlzNuRAYakATLj73LhVXYukOj2zVdh7P8W8tnoqXnZTMwVSVeg4WkoLJ2KYo6t7UXj1SveRy14RFFewwW4kDddTuD8VLSuDRa14eNPNge6Y8Rg30/7UmAbPOG/lRpmzskJO37ttldc4Ttd5cAl+qX9NZgDJ1UCCZWuZ44NFPdx+Uri4j42601QTnw7e/ZFTIbCDqdyONMMOk25Wv1dP+tRc+yV3NPq717Bx5SZpnw4HeHGtTtMResNfVHEOH/B1XN2moAwbldhzWG+E8QRQPUOkgB9vjPQiJBev+25PGILBhE4T6A1h1Qj3WqLiWFVGsA3sWvdBzYQwDuWqCu1K6yto563PiXIATrprZeO1e+oZ+znkMLu6mNL8agXC6Vww92cMf/0R2mYytiBJP9Hs8J1GgsR2fYbJEAx4UHiLlP6dafN4h+0vyiayyv6ojfRlsHbFBocjjWKkdNUL7iT7C4sTgO7NUqgXs71c3mrT/U8fNPAMzc+SwK/G8nuoLy5ej1p5hyT8rdcPbxRqE=
  - secure: pbM494/xe4ujSFxiks3rJqtjhURQeye/3Q61h40GoKz+/e7gmclwHFRuYyQFsbpyTYwU6IAOBgjG0t4tGPEYfF8uj4nUc7zQf9KxXxqjYlxsQpMAG7KXBbk9WEyp7rqX0Q4GVZXni2w2k79N3E2XGs7ANaVeR7J+HDm2bSLWMVqF1WCaxagfjf9a7UAXv+t9Pl/v+tuzAm+7aIvcC1Ex0GkS/TA9+/qI2/tyKtioEeLxJu/afP4NaDH/68n/RSxe23psp/+Xe0Gn3gCEGq1CaOn5WITyM50nsZG8yaumbERNWEaNgQ44YQF2G6OjJy9OXDBuSfwgEMW8RQx7ysPNA5vRO+pxJXWWmEnieDGGqWxPTokFUylPzq8WKGAqO1lI8o2bZK6JKyWK3kKcC/5ZJwQoDqBnHQ5DJlLWkTIJmCTh+6YCfyVSbt44G8TFF3pgYkQzWaxXt5HEfsu4FLyPqB6YbT4rR5ugnOwxuvwOtP0djBze+oro1A9pYrkDZgmPn5ErC9U2IrVBBVSmCmaQOwAxw5D6O5p0GXbKXnRr6h+bBUM/spzNZKy9w/30CCOLPVa/O3j+MzstTaWVN4tnhd+meNzwgtXLEnO6VJ/cVvnOw2SNvF7BhhEsFRsiqmjvDovuICf5hcdR8pJC3+XKKvFaBKZ3xTNX8u6SqEd5ub4=
notifications:
  slack:
    rooms:
      secure: eIPTXJxf2ikJRv22HPX/xwfkTZsdg59rc33GhRFipev76n1aoE242IIktr7ri9lmsM2Yx06srqXDApU/oBBrWAoBORMaRYvLEme1on/WqiTutZ8/a8Q9GYJTAuLODlMtrvXNSP62l3maSwUe+4/3hzL3OlJrxqRAvnXXJbYLHtC2W27AJsbAC+KhDrxjvJVJUBh/ikSLyFgdRcngTZBDMwiIod/IUGVteoSHuEe2c6A+yzQALFPhC8D2B+qvm2fv7HsYN295kbhBf6BPXL4/KZQDJm9gN8LBAOT+4N4d890iQGBNBLXSCuuYoKDHwYGTcS6llk0jRiGMQiUyGe+O+v1mJ6SI+y6O/LGIlxKAxN5p2yEYvaeH/pZReVtxe+apLUFCP3Ly9Q522/7kIGKGqH2/Mpe7wz3Yzvx3WqnHnEgedtDbtQmDaXdvU0akbBScJLnvk8Fmm2ZQjZ0QLSkjC6JhciB1djL9pmbY+3ND9L4oM/u2cw5D+we88OeMVKyVWJcCK/JCfJPo81SrCI/PKAKQLQmLRG2Q5HeBUeGAGpQ1mG1TtR/IOUhkK0WPqzwaIVguLwajuqqCBvJi8MNkgKzladuk9SW1IxgmVBjbg4oXToT8TkhCvG7mNdLpsGU+dipOv+EjvG5IFWlshQTmVwT/xQRhhVADF1agP+kZo3M=
    on_success: change
    on_failure: change
